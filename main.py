# Filter the list of servers that are hosted either in Azure or AWS IP blocks.

import shodan

#SHODAN_API_KEY = ""



api = shodan.Shodan(SHODAN_API_KEY)

shodan_dork = "product:java"

azure = []
aws = []

# Wrap the request in a try/ except block to catch errors
try:
        # Search Shodan
        results = api.search(shodan_dork)

        # Show the results
        print("Shodan Dork: " + shodan_dork)
        print(" ")
        print('Results found: {}'.format(results['total']))
        for result in results['matches']:
                print('IP: {}'.format(result['ip_str']))
                print(result['data'])
                print("Organisation: ", result['org'])
                print('')
                if (result['org'] == "Amazon.com, Inc."):
                                                aws.append(result['ip_str'])
                elif ("zure" in result['org']):
                                         azure.append(result['ip_str'])
        print("=======AZURE=========")
        print(azure)
        print("========AWS=========")
        print(aws)

except shodan.APIError as e:
                        print('Error: {}', e)

